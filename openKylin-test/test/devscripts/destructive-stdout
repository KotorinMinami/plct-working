make -C test/ destructive-test-installed
make[1]: Entering directory '/tmp/autopkgtest.ZsalRu/build.FJk/src/test'
./test_debi --installed
dpkg-deb: building package 'devscripts-test-already-installed' in '/tmp/XWne3n_dXO/devscripts-test-already-installed_0_all.deb'.
dpkg-deb: building package 'devscripts-test-already-installed' in '/tmp/XWne3n_dXO/devscripts-test-already-installed_1_all.deb'.
dpkg-deb: building package 'devscripts-test-already-installed' in '/tmp/XWne3n_dXO/devscripts-test-already-installed_2_all.deb'.
dpkg-deb: building package 'devscripts-test-not-installed' in '/tmp/XWne3n_dXO/devscripts-test-not-installed_1_all.deb'.
dpkg-deb: building package 'devscripts-test-gains-local-dependency' in '/tmp/XWne3n_dXO/devscripts-test-gains-local-dependency_0_all.deb'.
dpkg-deb: building package 'devscripts-test-gains-local-dependency' in '/tmp/XWne3n_dXO/devscripts-test-gains-local-dependency_1_all.deb'.
dpkg-deb: building package 'devscripts-test-dependency' in '/tmp/XWne3n_dXO/devscripts-test-dependency_1_all.deb'.
dpkg-deb: building package 'devscripts-test-gains-dependency' in '/tmp/XWne3n_dXO/devscripts-test-gains-dependency_0_all.deb'.
dpkg-deb: building package 'devscripts-test-gains-dependency' in '/tmp/XWne3n_dXO/devscripts-test-gains-dependency_1_all.deb'.
ok 1
Selecting previously unselected package devscripts-test-already-installed.
(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack .../devscripts-test-already-installed_0_all.deb ...
Unpacking devscripts-test-already-installed (0) ...
Setting up devscripts-test-already-installed (0) ...
ok 2
(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack devscripts-test-already-installed_1_all.deb ...
Unpacking devscripts-test-already-installed (1) over (0) ...
Selecting previously unselected package devscripts-test-not-installed.
Preparing to unpack devscripts-test-not-installed_1_all.deb ...
Unpacking devscripts-test-not-installed (1) ...
Setting up devscripts-test-already-installed (1) ...
Setting up devscripts-test-not-installed (1) ...
ok 3 - plain debi succeeds
ok 4 - already installed package was upgraded
ok 5 - not-installed package was installed (regressed in \#932640)
(Reading database ... 162342 files and directories currently installed.)
Removing devscripts-test-already-installed (1) ...
Removing devscripts-test-not-installed (1) ...
ok 6
Selecting previously unselected package devscripts-test-already-installed.
(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack .../devscripts-test-already-installed_2_all.deb ...
Unpacking devscripts-test-already-installed (2) ...
Setting up devscripts-test-already-installed (2) ...
ok 7
(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack devscripts-test-already-installed_1_all.deb ...
Unpacking devscripts-test-already-installed (1) over (2) ...
Setting up devscripts-test-already-installed (1) ...
ok 8 - plain debi succeeds
ok 9 - already installed package was downgraded
(Reading database ... 162342 files and directories currently installed.)
Removing devscripts-test-already-installed (1) ...
ok 10
Selecting previously unselected package devscripts-test-already-installed.
(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack .../devscripts-test-already-installed_2_all.deb ...
Unpacking devscripts-test-already-installed (2) ...
Setting up devscripts-test-already-installed (2) ...
ok 11
Reading package lists...
Building dependency tree...
Reading state information...
Skipping devscripts-test-not-installed, it is not installed and only upgrades are requested.
The following packages will be DOWNGRADED:
  devscripts-test-already-installed
0 upgraded, 0 newly installed, 1 downgraded, 0 to remove and 18 not upgraded.
Need to get 0 B/504 B of archives.
After this operation, 0 B of additional disk space will be used.
Get:1 /tmp/XWne3n_dXO/devscripts-test-already-installed_1_all.deb devscripts-test-already-installed all 1 [504 B]
dpkg: warning: downgrading devscripts-test-already-installed from 2 to 1
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack .../devscripts-test-already-installed_1_all.deb ...
Unpacking devscripts-test-already-installed (1) over (2) ...
Setting up devscripts-test-already-installed (1) ...
ok 12 - debi --upgrade succeeds
ok 13 - already installed package was downgraded
ok 14 - not-installed package was not installed
(Reading database ... 162342 files and directories currently installed.)
Removing devscripts-test-already-installed (1) ...
ok 15
Reading package lists...
Building dependency tree...
Reading state information...
Skipping devscripts-test-not-installed, it is not installed and only upgrades are requested.
0 upgraded, 0 newly installed, 0 to remove and 18 not upgraded.
ok 16 - debi --upgrade succeeds
ok 17 - not-installed package was not installed
ok 18
Selecting previously unselected package devscripts-test-gains-dependency.
(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack .../devscripts-test-gains-dependency_0_all.deb ...
Unpacking devscripts-test-gains-dependency (0) ...
Setting up devscripts-test-gains-dependency (0) ...
ok 19
(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack devscripts-test-gains-dependency_1_all.deb ...
Unpacking devscripts-test-gains-dependency (1) over (0) ...
ok 20 - debi without --with-depends does not install dependency
ok 21 - package with a dependency was not installed
ok 22 - third party dependency was not installed
(Reading database ... 162342 files and directories currently installed.)
Removing devscripts-test-gains-dependency (1) ...
ok 23
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  hello
The following NEW packages will be installed:
  devscripts-test-gains-dependency hello
0 upgraded, 2 newly installed, 0 to remove and 18 not upgraded.
Need to get 59.5 kB/60.0 kB of archives.
After this operation, 286 kB of additional disk space will be used.
Get:1 /tmp/XWne3n_dXO/devscripts-test-gains-dependency_1_all.deb devscripts-test-gains-dependency all 1 [498 B]
Get:2 http://archive.build.openkylin.top/openkylin yangtze/main riscv64 hello riscv64 2.12.1-ok1 [59.5 kB]
Fetched 59.5 kB in 0s (126 kB/s)
Selecting previously unselected package hello.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack .../hello_2.12.1-ok1_riscv64.deb ...
Unpacking hello (2.12.1-ok1) ...
Selecting previously unselected package devscripts-test-gains-dependency.
Preparing to unpack .../devscripts-test-gains-dependency_1_all.deb ...
Unpacking devscripts-test-gains-dependency (1) ...
Setting up hello (2.12.1-ok1) ...
Setting up devscripts-test-gains-dependency (1) ...
Processing triggers for man-db (2.9.1-ok3) ...
Processing triggers for install-info (6.7.0.dfsg.2-ok1) ...
ok 24 - debi --with-depends succeeds
ok 25 - package with a dependency was installed
ok 26 - third party dependency was installed
(Reading database ... 162393 files and directories currently installed.)
Removing devscripts-test-gains-dependency (1) ...
Removing hello (2.12.1-ok1) ...
Processing triggers for man-db (2.9.1-ok3) ...
Processing triggers for install-info (6.7.0.dfsg.2-ok1) ...
ok 27
Selecting previously unselected package devscripts-test-gains-dependency.
(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack .../devscripts-test-gains-dependency_0_all.deb ...
Unpacking devscripts-test-gains-dependency (0) ...
Setting up devscripts-test-gains-dependency (0) ...
ok 28
(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack devscripts-test-gains-dependency_1_all.deb ...
Unpacking devscripts-test-gains-dependency (1) over (0) ...
Skipping unselected package devscripts-test-not-installed.
Reading package lists...
Building dependency tree...
Reading state information...
Correcting dependencies... Done
The following additional packages will be installed:
  hello
The following NEW packages will be installed:
  hello
0 upgraded, 1 newly installed, 0 to remove and 18 not upgraded.
1 not fully installed or removed.
Need to get 0 B/59.5 kB of archives.
After this operation, 286 kB of additional disk space will be used.
Selecting previously unselected package hello.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack .../hello_2.12.1-ok1_riscv64.deb ...
Unpacking hello (2.12.1-ok1) ...
Setting up hello (2.12.1-ok1) ...
Setting up devscripts-test-gains-dependency (1) ...
Processing triggers for man-db (2.9.1-ok3) ...
Processing triggers for install-info (6.7.0.dfsg.2-ok1) ...
ok 29 - debi --with-depends --upgrade succeeds
ok 30 - package with a dependency was installed
ok 31 - third party dependency was installed
ok 32 - not-installed package was not installed (\#932963)
(Reading database ... 162393 files and directories currently installed.)
Removing devscripts-test-gains-dependency (1) ...
Removing hello (2.12.1-ok1) ...
Processing triggers for man-db (2.9.1-ok3) ...
Processing triggers for install-info (6.7.0.dfsg.2-ok1) ...
ok 33
Selecting previously unselected package devscripts-test-gains-local-dependency.
(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack .../devscripts-test-gains-local-dependency_0_all.deb ...
Unpacking devscripts-test-gains-local-dependency (0) ...
Setting up devscripts-test-gains-local-dependency (0) ...
Skipping unselected package devscripts-test-dependency.
(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack devscripts-test-gains-local-dependency_1_all.deb ...
Unpacking devscripts-test-gains-local-dependency (1) over (0) ...
Reading package lists...
Building dependency tree...
Reading state information...
Correcting dependencies... Done
The following additional packages will be installed:
  devscripts-test-dependency
The following NEW packages will be installed:
  devscripts-test-dependency
0 upgraded, 1 newly installed, 0 to remove and 18 not upgraded.
1 not fully installed or removed.
Need to get 0 B/498 B of archives.
After this operation, 0 B of additional disk space will be used.
Get:1 /tmp/XWne3n_dXO/devscripts-test-dependency_1_all.deb devscripts-test-dependency all 1 [498 B]
Selecting previously unselected package devscripts-test-dependency.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 162342 files and directories currently installed.)
Preparing to unpack .../devscripts-test-dependency_1_all.deb ...
Unpacking devscripts-test-dependency (1) ...
Setting up devscripts-test-dependency (1) ...
Setting up devscripts-test-gains-local-dependency (1) ...
ok 34 - corner case from \#932963: debi --upgrade --with-depends can cope with a new dependency on a binary from the same source
ok 35 - the package we wanted to upgrade is upgraded
ok 36 - the new dependency of the package we wanted to upgrade is installed
(Reading database ... 162342 files and directories currently installed.)
Removing devscripts-test-gains-local-dependency (1) ...
Removing devscripts-test-dependency (1) ...
ok 37
1..37
make[1]: Leaving directory '/tmp/autopkgtest.ZsalRu/build.FJk/src/test'
