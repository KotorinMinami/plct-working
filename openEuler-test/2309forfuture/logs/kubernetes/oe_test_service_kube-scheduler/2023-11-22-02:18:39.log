+ source ./common/common.sh
++ source ../common/common_lib.sh
+++ source /root/mugen/libs/locallibs/common_lib.sh
++++ python3 --version
++++ '[' 0 -eq 0 ']'
++++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start environmental preparation.'
+ message='Start environmental preparation.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start environmental preparation.'
Wed Nov 22 02:18:43 2023 - INFO  - Start environmental preparation.
+ conf_common
+ pkg_path=/opt/cfssl.tar.gz
+ cfssl_path=/opt/cfssl
+++ dirname oe_test_service_kube-scheduler.sh
++ cd .
++ pwd
+ current_path=/root/mugen/testcases/cli-test/kubernetes
+ cert_path=/etc/kubernetes/pki
+ mkdir -p /opt/cfssl /etc/kubernetes/pki
++ hostname
+ host_name=k8snode1
+ name_host=k8snode1
+ hostname
+ grep -i k8snode1
k8snode1
+ kubernetes_install
+ DNF_INSTALL 'docker conntrack-tools socat kubernetes*' 1
+ pkgs='docker conntrack-tools socat kubernetes*'
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs 'docker conntrack-tools socat kubernetes*' --node 1 --tempfile ''
Wed Nov 22 02:18:54 2023 - INFO  - pkgs:(docker conntrack-tools socat kubernetes*) is already installed
+ tmpfile2=
+ '[' -z '' ']'
+ tmpfile=
+ certificate_prepare
+ wget --no-check-certificate https://github.com/cloudflare/cfssl/archive/v1.5.0.tar.gz -O /opt/cfssl.tar.gz
--2023-11-22 02:18:54--  https://github.com/cloudflare/cfssl/archive/v1.5.0.tar.gz
Resolving github.com (github.com)... 20.205.243.166
Connecting to github.com (github.com)|20.205.243.166|:443... connected.
HTTP request sent, awaiting response... Read error (The TLS connection was non-properly terminated.) in headers.
Retrying.

--2023-11-22 02:20:56--  (try: 2)  https://github.com/cloudflare/cfssl/archive/v1.5.0.tar.gz
Connecting to github.com (github.com)|20.205.243.166|:443... connected.
HTTP request sent, awaiting response... Read error (The TLS connection was non-properly terminated.) in headers.
Retrying.

--2023-11-22 02:23:17--  (try: 3)  https://github.com/cloudflare/cfssl/archive/v1.5.0.tar.gz
Connecting to github.com (github.com)|20.205.243.166|:443... connected.
HTTP request sent, awaiting response... Read error (The TLS connection was non-properly terminated.) in headers.
Retrying.

--2023-11-22 02:26:29--  (try: 4)  https://github.com/cloudflare/cfssl/archive/v1.5.0.tar.gz
Connecting to github.com (github.com)|20.205.243.166|:443... connected.
HTTP request sent, awaiting response... Read error (The TLS connection was non-properly terminated.) in headers.
Retrying.

--2023-11-22 02:28:33--  (try: 5)  https://github.com/cloudflare/cfssl/archive/v1.5.0.tar.gz
Connecting to github.com (github.com)|20.205.243.166|:443... failed: Connection refused.
Resolving github.com (github.com)... 20.205.243.166
Connecting to github.com (github.com)|20.205.243.166|:443... failed: Connection refused.
+ test -f /opt/cfssl.tar.gz
+ which tar
/usr/bin/tar
+ tar -zxvf /opt/cfssl.tar.gz -C /opt/cfssl --strip-components=1

gzip: stdin: unexpected end of file
tar: Child returned status 1
tar: Error is not recoverable: exiting now
+ which golang
which: no golang in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin)
+ DNF_INSTALL golang 1
+ pkgs=golang
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs golang --node 1 --tempfile ''
Wed Nov 22 02:31:11 2023 - INFO  - pkgs:(golang) is already installed
+ tmpfile2=
+ '[' -z '' ']'
+ tmpfile=
+ cd /opt/cfssl
+ make -j6
fatal: not a git repository (or any of the parent directories): .git
make: Nothing to be done for 'all'.
+ cp bin/cfssl bin/cfssl-bundle bin/cfssl-certinfo bin/cfssljson bin/cfssl-newkey bin/cfssl-scan /usr/local/bin/
+ cd /etc/kubernetes/pki
+ echo '{
    "signing": {
      "default": {
        "expiry": "8760h"
      },
      "profiles": {
        "kubernetes": {
          "usages": [
            "signing",
            "key encipherment",
            "server auth",
            "client auth"
          ],
          "expiry": "8760h"
        }
      }
    }
  }'
+ echo '{
    "CN": "Kubernetes",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "openEuler",
        "OU": "WWW",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -initca ca-csr.json
+ cfssljson -bare ca
2023/11/22 02:31:19 [INFO] generating a new CA key and certificate from CSR
2023/11/22 02:31:19 [INFO] generate received request
2023/11/22 02:31:19 [INFO] received CSR
2023/11/22 02:31:19 [INFO] generating key: rsa-2048
2023/11/22 02:31:22 [INFO] encoded CSR
2023/11/22 02:31:22 [INFO] signed certificate with serial number 281005116387063343055374580539401884923570302896
+ echo '{
    "CN": "admin",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "system:masters",
        "OU": "Containerum",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json
+ cfssljson -bare admin
2023/11/22 02:31:23 [INFO] generate received request
2023/11/22 02:31:23 [INFO] received CSR
2023/11/22 02:31:23 [INFO] generating key: rsa-2048
2023/11/22 02:31:26 [INFO] encoded CSR
2023/11/22 02:31:26 [INFO] signed certificate with serial number 450143466087728270623238218428570434434099528903
2023/11/22 02:31:26 [WARNING] This certificate lacks a "hosts" field. This makes it unsuitable for
websites. For more information see the Baseline Requirements for the Issuance and Management
of Publicly-Trusted Certificates, v.1.1.6, from the CA/Browser Forum (https://cabforum.org);
specifically, section 10.2.3 ("Information Requirements").
+ echo '{
    "CN": "service-accounts",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "Kubernetes",
        "OU": "openEuler k8s install",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes service-account-csr.json
+ cfssljson -bare service-account
2023/11/22 02:31:27 [INFO] generate received request
2023/11/22 02:31:27 [INFO] received CSR
2023/11/22 02:31:27 [INFO] generating key: rsa-2048
2023/11/22 02:31:30 [INFO] encoded CSR
2023/11/22 02:31:30 [INFO] signed certificate with serial number 128932511238364627760543162690352393522145693669
2023/11/22 02:31:30 [WARNING] This certificate lacks a "hosts" field. This makes it unsuitable for
websites. For more information see the Baseline Requirements for the Issuance and Management
of Publicly-Trusted Certificates, v.1.1.6, from the CA/Browser Forum (https://cabforum.org);
specifically, section 10.2.3 ("Information Requirements").
+ echo '{
    "CN": "system:kube-controller-manager",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "system:kube-controller-manager",
        "OU": "openEuler k8s kcm",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-controller-manager-csr.json
+ cfssljson -bare kube-controller-manager
2023/11/22 02:31:30 [INFO] generate received request
2023/11/22 02:31:30 [INFO] received CSR
2023/11/22 02:31:30 [INFO] generating key: rsa-2048
2023/11/22 02:31:32 [INFO] encoded CSR
2023/11/22 02:31:32 [INFO] signed certificate with serial number 362859856350891765951993902698042943419850218093
2023/11/22 02:31:32 [WARNING] This certificate lacks a "hosts" field. This makes it unsuitable for
websites. For more information see the Baseline Requirements for the Issuance and Management
of Publicly-Trusted Certificates, v.1.1.6, from the CA/Browser Forum (https://cabforum.org);
specifically, section 10.2.3 ("Information Requirements").
+ echo '{
    "CN": "system:kube-proxy",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "system:node-proxier",
        "OU": "openEuler k8s kube proxy",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssljson -bare kube-proxy
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json
2023/11/22 02:31:32 [INFO] generate received request
2023/11/22 02:31:32 [INFO] received CSR
2023/11/22 02:31:32 [INFO] generating key: rsa-2048
2023/11/22 02:31:37 [INFO] encoded CSR
2023/11/22 02:31:37 [INFO] signed certificate with serial number 351314909701598651082160885738363582240455402917
2023/11/22 02:31:37 [WARNING] This certificate lacks a "hosts" field. This makes it unsuitable for
websites. For more information see the Baseline Requirements for the Issuance and Management
of Publicly-Trusted Certificates, v.1.1.6, from the CA/Browser Forum (https://cabforum.org);
specifically, section 10.2.3 ("Information Requirements").
+ echo '{
    "CN": "system:kube-scheduler",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "system:kube-scheduler",
        "OU": "openEuler k8s kube scheduler",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-scheduler-csr.json
+ cfssljson -bare kube-scheduler
2023/11/22 02:31:37 [INFO] generate received request
2023/11/22 02:31:37 [INFO] received CSR
2023/11/22 02:31:37 [INFO] generating key: rsa-2048
2023/11/22 02:31:39 [INFO] encoded CSR
2023/11/22 02:31:39 [INFO] signed certificate with serial number 571237927858736789548801410683329928975831447114
2023/11/22 02:31:39 [WARNING] This certificate lacks a "hosts" field. This makes it unsuitable for
websites. For more information see the Baseline Requirements for the Issuance and Management
of Publicly-Trusted Certificates, v.1.1.6, from the CA/Browser Forum (https://cabforum.org);
specifically, section 10.2.3 ("Information Requirements").
+ echo '{
    "CN": "system:node:k8snode1",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "system:nodes",
        "OU": "openEuler k8s kubelet",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=k8snode1,127.0.0.1 -profile=kubernetes k8snode1-csr.json
+ cfssljson -bare k8snode1
2023/11/22 02:31:39 [INFO] generate received request
2023/11/22 02:31:39 [INFO] received CSR
2023/11/22 02:31:39 [INFO] generating key: rsa-2048
2023/11/22 02:31:43 [INFO] encoded CSR
2023/11/22 02:31:43 [INFO] signed certificate with serial number 697925276389083050418135993794329298853751682642
+ echo '{
    "CN": "kubernetes",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "Kubernetes",
        "OU": "openEuler k8s kube api server",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=10.32.0.1,127.0.0.1,kubernetes,kubernetes.default,kubernetes.default.svc,kubernetes.default.svc.cluster,kubernetes.svc.cluster.local -profile=kubernetes kubernetes-csr.json
+ cfssljson -bare kubernetes
2023/11/22 02:31:43 [INFO] generate received request
2023/11/22 02:31:43 [INFO] received CSR
2023/11/22 02:31:43 [INFO] generating key: rsa-2048
2023/11/22 02:31:44 [INFO] encoded CSR
2023/11/22 02:31:44 [INFO] signed certificate with serial number 677730830090630301038269535693260335896021231585
+ cd /root/mugen/testcases/cli-test/kubernetes
+ etcd_install
+ DNF_INSTALL etcd
+ pkgs=etcd
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs etcd --node 1 --tempfile ''
Wed Nov 22 02:31:52 2023 - INFO  - pkgs:(etcd) is already installed
+ tmpfile2=
+ '[' -z '' ']'
+ tmpfile=
+ systemctl start etcd
Job for etcd.service failed because the control process exited with error code.
See "systemctl status etcd.service" and "journalctl -xeu etcd.service" for details.
+ kubeconfig_prepare
+ cd /etc/kubernetes/pki
+ kubectl config set-cluster openeuler-k8s --certificate-authority=/etc/kubernetes/pki/ca.pem --embed-certs=true --server=https://127.0.0.1:6443 --kubeconfig=kube-proxy.kubeconfig
Cluster "openeuler-k8s" set.
+ kubectl config set-credentials system:kube-proxy --client-certificate=/etc/kubernetes/pki/kube-proxy.pem --client-key=/etc/kubernetes/pki/kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x2ac8712f88]

goroutine 1 [running]:
reflect.mapiternext(0x3f78190270?)
	/usr/lib/golang/src/runtime/map.go:1380 +0x28
k8s.io/kubernetes/vendor/github.com/modern-go/reflect2.(*UnsafeMapIterator).UnsafeNext(0x3fa38ed108?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/modern-go/reflect2/unsafe_map.go:136 +0x44
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*sortKeysMapEncoder).Encode(0x3f781b4120, 0x3f788983a8, 0x3f7837e1e0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_map.go:297 +0x328
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*placeholderEncoder).Encode(0x2ac9961700?, 0x2ac8762a01?, 0x3f7837e1f8?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:332 +0x44
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structFieldEncoder).Encode(0x3f781b5e00, 0x2ac9890abd?, 0x3f7837e1e0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:110 +0x70
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structEncoder).Encode(0x3f781b5f50, 0x3fd3e5cc71?, 0x3f7837e1e0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:158 +0x72c
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*placeholderEncoder).Encode(0x2ac9961700?, 0x2ac8ac6a01?, 0x3f7837e1f8?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:332 +0x44
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structFieldEncoder).Encode(0x3f786a05a0, 0x2ac9855c31?, 0x3f7837e1e0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:110 +0x70
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structEncoder).Encode(0x3f786a0600, 0x2ac9907ac0?, 0x3f7837e1e0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:158 +0x72c
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*sliceEncoder).Encode(0x3f785b45d0, 0x3f786a8108, 0x3f7837e1e0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_slice.go:38 +0x320
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structFieldEncoder).Encode(0x3f786a1110, 0x2ac985bb06?, 0x3f7837e1e0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:110 +0x70
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structEncoder).Encode(0x3f786a1200, 0x8?, 0x3f7837e1e0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:158 +0x72c
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*OptionalEncoder).Encode(0x3f780fe8c0?, 0x0?, 0x0?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_optional.go:70 +0xe8
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*onePtrEncoder).Encode(0x3f783a6b10, 0x3f786a80b0, 0x3f783f1560?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:219 +0xa0
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*Stream).WriteVal(0x3f7837e1e0, {0x2ac99e6e20, 0x3f786a80b0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:98 +0x194
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*frozenConfig).Marshal(0x3f780fe8c0, {0x2ac99e6e20, 0x3f786a80b0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/config.go:299 +0xb0
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json.(*Serializer).doEncode(0x2?, {0x2ac9b32a90?, 0x3f786a80b0?}, {0x2ac9b29aa0, 0x3f788ac090})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json/json.go:306 +0x80
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json.(*Serializer).Encode(0x3f7832c0a0, {0x2ac9b32a90, 0x3f786a80b0}, {0x2ac9b29aa0, 0x3f788ac090})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json/json.go:301 +0x108
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning.(*codec).doEncode(0x3f783aa320, {0x2ac9b32a40?, 0x3f7837e120}, {0x2ac9b29aa0, 0x3f788ac090})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning/versioning.go:244 +0x5a0
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning.(*codec).Encode(0x3f783aa320, {0x2ac9b32a40, 0x3f7837e120}, {0x2ac9b29aa0, 0x3f788ac090})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning/versioning.go:184 +0x108
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime.Encode({0x3f7c0b65c0, 0x3f783aa320}, {0x2ac9b32a40, 0x3f7837e120})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/codec.go:50 +0x80
k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd.Write(...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd/loader.go:473
k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd.WriteToFile({{0x0, 0x0}, {0x0, 0x0}, {0x0, 0x3f788ad950}, 0x3f788ad980, 0x3f788ad9b0, 0x3f788ad9e0, {0x3f785d0017, ...}, ...}, ...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd/loader.go:426 +0x138
k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd.ModifyConfig({0x2ac9b41fa0, 0x3f78104410}, {{0x0, 0x0}, {0x0, 0x0}, {0x0, 0x3f788acf00}, 0x3f788acf30, 0x3f788acf60, ...}, ...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd/config.go:294 +0x9b0
k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config.createAuthInfoOptions.run({{0x2ac9b41fa0, 0x3f78104410}, {0x3fd3e5cc71, 0x11}, {0x1, {0x3fd3e5cc98, 0x22}}, {0x1, {0x3fd3e5ccc8, 0x26}}, ...})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config/create_authinfo.go:203 +0x19c
k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config.newCmdConfigSetAuthInfo.func1(0x3f7868f340?, {0x2ac95ba9b5?, 0x5?, 0x5?})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config/create_authinfo.go:161 +0xb4
k8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).execute(0x3f7868f340, {0x3f78104500, 0x5, 0x5})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:854 +0x4dc
k8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x3f7838b600)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:958 +0x324
k8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).Execute(...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:895
main.main()
	_output/local/go/src/k8s.io/kubernetes/cmd/kubectl/kubectl.go:49 +0x1a8
+ kubectl config set-context default --cluster=openeuler-k8s --user=system:kube-proxy --kubeconfig=kube-proxy.kubeconfig
Context "default" modified.
+ kubectl config use-context default --kubeconfig=kube-proxy.kubeconfig
Switched to context "default".
+ kubectl config set-cluster openeuler-k8s --certificate-authority=/etc/kubernetes/pki/ca.pem --embed-certs=true --server=https://127.0.0.1:6443 --kubeconfig=kube-controller-manager.kubeconfig
Cluster "openeuler-k8s" set.
+ kubectl config set-credentials system:kube-controller-manager --client-certificate=/etc/kubernetes/pki/kube-controller-manager.pem --client-key=/etc/kubernetes/pki/kube-controller-manager-key.pem --embed-certs=true --kubeconfig=kube-controller-manager.kubeconfig
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x2ac7754f88]

goroutine 1 [running]:
reflect.mapiternext(0x3f8c1e7290?)
	/usr/lib/golang/src/runtime/map.go:1380 +0x28
k8s.io/kubernetes/vendor/github.com/modern-go/reflect2.(*UnsafeMapIterator).UnsafeNext(0x3fb8284108?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/modern-go/reflect2/unsafe_map.go:136 +0x44
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*sortKeysMapEncoder).Encode(0x3f8c8437a0, 0x3f8c6e90a8, 0x3f8c37a660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_map.go:297 +0x328
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*placeholderEncoder).Encode(0x2ac89a3700?, 0x2ac77a4a01?, 0x3f8c37a678?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:332 +0x44
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structFieldEncoder).Encode(0x3f8c849320, 0x2ac88d2abd?, 0x3f8c37a660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:110 +0x70
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structEncoder).Encode(0x3f8c849470, 0x3fdfcc0c3d?, 0x3f8c37a660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:158 +0x72c
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*placeholderEncoder).Encode(0x2ac89a3700?, 0x2ac7b08a01?, 0x3f8c37a678?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:332 +0x44
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structFieldEncoder).Encode(0x3f8c8496e0, 0x2ac8897c31?, 0x3f8c37a660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:110 +0x70
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structEncoder).Encode(0x3f8c849740, 0x2ac8949ac0?, 0x3f8c37a660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:158 +0x72c
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*sliceEncoder).Encode(0x3f8c834ae0, 0x3f8c0c6c08, 0x3f8c37a660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_slice.go:38 +0x320
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structFieldEncoder).Encode(0x3f8c852270, 0x2ac889db06?, 0x3f8c37a660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:110 +0x70
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structEncoder).Encode(0x3f8c852360, 0x8?, 0x3f8c37a660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:158 +0x72c
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*OptionalEncoder).Encode(0x3f8c1a1e00?, 0x0?, 0x0?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_optional.go:70 +0xe8
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*onePtrEncoder).Encode(0x3f8c0737b0, 0x3f8c0c6bb0, 0x3f8c15ef30?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:219 +0xa0
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*Stream).WriteVal(0x3f8c37a660, {0x2ac8a28e20, 0x3f8c0c6bb0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:98 +0x194
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*frozenConfig).Marshal(0x3f8c1a1e00, {0x2ac8a28e20, 0x3f8c0c6bb0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/config.go:299 +0xb0
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json.(*Serializer).doEncode(0x2?, {0x2ac8b74a90?, 0x3f8c0c6bb0?}, {0x2ac8b6baa0, 0x3f8c399d70})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json/json.go:306 +0x80
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json.(*Serializer).Encode(0x3f8c0881e0, {0x2ac8b74a90, 0x3f8c0c6bb0}, {0x2ac8b6baa0, 0x3f8c399d70})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json/json.go:301 +0x108
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning.(*codec).doEncode(0x3f8c0a6c80, {0x2ac8b74a40?, 0x3f8c37a4e0}, {0x2ac8b6baa0, 0x3f8c399d70})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning/versioning.go:244 +0x5a0
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning.(*codec).Encode(0x3f8c0a6c80, {0x2ac8b74a40, 0x3f8c37a4e0}, {0x2ac8b6baa0, 0x3f8c399d70})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning/versioning.go:184 +0x108
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime.Encode({0x3f90a6d518, 0x3f8c0a6c80}, {0x2ac8b74a40, 0x3f8c37a4e0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/codec.go:50 +0x80
k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd.Write(...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd/loader.go:473
k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd.WriteToFile({{0x0, 0x0}, {0x0, 0x0}, {0x0, 0x3f8c399740}, 0x3f8c399770, 0x3f8c3997a0, 0x3f8c3997d0, {0x3f8c4c9127, ...}, ...}, ...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd/loader.go:426 +0x138
k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd.ModifyConfig({0x2ac8b83fa0, 0x3f8c3b82d0}, {{0x0, 0x0}, {0x0, 0x0}, {0x0, 0x3f8c398ba0}, 0x3f8c398bd0, 0x3f8c398c00, ...}, ...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd/config.go:294 +0x9b0
k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config.createAuthInfoOptions.run({{0x2ac8b83fa0, 0x3f8c3b82d0}, {0x3fdfcc0c3d, 0x1e}, {0x1, {0x3fdfcc0c71, 0x2f}}, {0x1, {0x3fdfcc0cae, 0x33}}, ...})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config/create_authinfo.go:203 +0x19c
k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config.newCmdConfigSetAuthInfo.func1(0x3f8c68f340?, {0x2ac85fc9b5?, 0x5?, 0x5?})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config/create_authinfo.go:161 +0xb4
k8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).execute(0x3f8c68f340, {0x3f8c3b83c0, 0x5, 0x5})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:854 +0x4dc
k8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x3f8c0bd080)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:958 +0x324
k8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).Execute(...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:895
main.main()
	_output/local/go/src/k8s.io/kubernetes/cmd/kubectl/kubectl.go:49 +0x1a8
+ kubectl config set-context default --cluster=openeuler-k8s --user=system:kube-controller-manager --kubeconfig=kube-controller-manager.kubeconfig
Context "default" modified.
+ kubectl config use-context default --kubeconfig=kube-controller-manager.kubeconfig
Switched to context "default".
+ kubectl config set-cluster openeuler-k8s --certificate-authority=/etc/kubernetes/pki/ca.pem --embed-certs=true --server=https://127.0.0.1:6443 --kubeconfig=kube-scheduler.kubeconfig
Cluster "openeuler-k8s" set.
+ kubectl config set-credentials system:kube-scheduler --client-certificate=/etc/kubernetes/pki/kube-scheduler.pem --client-key=/etc/kubernetes/pki/kube-scheduler-key.pem --embed-certs=true --kubeconfig=kube-scheduler.kubeconfig
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x2adc3b5f88]

goroutine 1 [running]:
reflect.mapiternext(0x3f70190270?)
	/usr/lib/golang/src/runtime/map.go:1380 +0x28
k8s.io/kubernetes/vendor/github.com/modern-go/reflect2.(*UnsafeMapIterator).UnsafeNext(0x3f9aae25b8?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/modern-go/reflect2/unsafe_map.go:136 +0x44
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*sortKeysMapEncoder).Encode(0x3f706c77d0, 0x3f706550a8, 0x3f705818c0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_map.go:297 +0x328
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*placeholderEncoder).Encode(0x2add604700?, 0x2adc405a01?, 0x3f705818d8?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:332 +0x44
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structFieldEncoder).Encode(0x3f706dd350, 0x2add533abd?, 0x3f705818c0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:110 +0x70
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structEncoder).Encode(0x3f706dd4a0, 0x3ff283fc61?, 0x3f705818c0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:158 +0x72c
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*placeholderEncoder).Encode(0x2add604700?, 0x2adc769a01?, 0x3f705818d8?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:332 +0x44
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structFieldEncoder).Encode(0x3f706dd710, 0x2add4f8c31?, 0x3f705818c0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:110 +0x70
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structEncoder).Encode(0x3f706dd770, 0x2add5aaac0?, 0x3f705818c0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:158 +0x72c
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*sliceEncoder).Encode(0x3f70117bf0, 0x3f700c7448, 0x3f705818c0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_slice.go:38 +0x320
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structFieldEncoder).Encode(0x3f706f02a0, 0x2add4feb06?, 0x3f705818c0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:110 +0x70
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structEncoder).Encode(0x3f706f0390, 0x8?, 0x3f705818c0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:158 +0x72c
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*OptionalEncoder).Encode(0x3f700fe960?, 0x0?, 0x0?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_optional.go:70 +0xe8
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*onePtrEncoder).Encode(0x3f7045ac90, 0x3f700c73f0, 0x3f701e83c0?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:219 +0xa0
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*Stream).WriteVal(0x3f705818c0, {0x2add689e20, 0x3f700c73f0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:98 +0x194
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*frozenConfig).Marshal(0x3f700fe960, {0x2add689e20, 0x3f700c73f0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/config.go:299 +0xb0
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json.(*Serializer).doEncode(0x2?, {0x2add7d5a90?, 0x3f700c73f0?}, {0x2add7ccaa0, 0x3f70675dd0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json/json.go:306 +0x80
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json.(*Serializer).Encode(0x3f7032c0f0, {0x2add7d5a90, 0x3f700c73f0}, {0x2add7ccaa0, 0x3f70675dd0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json/json.go:301 +0x108
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning.(*codec).doEncode(0x3f703a8320, {0x2add7d5a40?, 0x3f70581800}, {0x2add7ccaa0, 0x3f70675dd0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning/versioning.go:244 +0x5a0
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning.(*codec).Encode(0x3f703a8320, {0x2add7d5a40, 0x3f70581800}, {0x2add7ccaa0, 0x3f70675dd0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning/versioning.go:184 +0x108
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime.Encode({0x3f752ff978, 0x3f703a8320}, {0x2add7d5a40, 0x3f70581800})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/codec.go:50 +0x80
k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd.Write(...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd/loader.go:473
k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd.WriteToFile({{0x0, 0x0}, {0x0, 0x0}, {0x0, 0x3f70675800}, 0x3f70675830, 0x3f70675860, 0x3f70675890, {0x3f70516557, ...}, ...}, ...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd/loader.go:426 +0x138
k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd.ModifyConfig({0x2add7e4fa0, 0x3f70088460}, {{0x0, 0x0}, {0x0, 0x0}, {0x0, 0x3f70674db0}, 0x3f70674de0, 0x3f70674e10, ...}, ...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd/config.go:294 +0x9b0
k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config.createAuthInfoOptions.run({{0x2add7e4fa0, 0x3f70088460}, {0x3ff283fc61, 0x15}, {0x1, {0x3ff283fc8c, 0x26}}, {0x1, {0x3ff283fcc0, 0x2a}}, ...})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config/create_authinfo.go:203 +0x19c
k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config.newCmdConfigSetAuthInfo.func1(0x3f70547340?, {0x2add25d9b5?, 0x5?, 0x5?})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config/create_authinfo.go:161 +0xb4
k8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).execute(0x3f70547340, {0x3f70088550, 0x5, 0x5})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:854 +0x4dc
k8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x3f700bcdc0)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:958 +0x324
k8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).Execute(...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:895
main.main()
	_output/local/go/src/k8s.io/kubernetes/cmd/kubectl/kubectl.go:49 +0x1a8
+ kubectl config set-context default --cluster=openeuler-k8s --user=system:kube-scheduler --kubeconfig=kube-scheduler.kubeconfig
Context "default" modified.
+ kubectl config use-context default --kubeconfig=kube-scheduler.kubeconfig
Switched to context "default".
+ kubectl config set-cluster openeuler-k8s --certificate-authority=/etc/kubernetes/pki/ca.pem --embed-certs=true --server=https://127.0.0.1:6443 --kubeconfig=admin.kubeconfig
Cluster "openeuler-k8s" set.
+ kubectl config set-credentials admin --client-certificate=/etc/kubernetes/pki/admin.pem --client-key=/etc/kubernetes/pki/admin-key.pem --embed-certs=true --kubeconfig=admin.kubeconfig
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x2ad36d1f88]

goroutine 1 [running]:
reflect.mapiternext(0x3f90190270?)
	/usr/lib/golang/src/runtime/map.go:1380 +0x28
k8s.io/kubernetes/vendor/github.com/modern-go/reflect2.(*UnsafeMapIterator).UnsafeNext(0x3fbc4b0108?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/modern-go/reflect2/unsafe_map.go:136 +0x44
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*sortKeysMapEncoder).Encode(0x3f9045eb70, 0x3f9082b0a8, 0x3f902f2660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_map.go:297 +0x328
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*placeholderEncoder).Encode(0x2ad4920700?, 0x2ad3721a01?, 0x3f902f2678?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:332 +0x44
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structFieldEncoder).Encode(0x3f90233530, 0x2ad484fabd?, 0x3f902f2660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:110 +0x70
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structEncoder).Encode(0x3f90233680, 0x3fee106c8c?, 0x3f902f2660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:158 +0x72c
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*placeholderEncoder).Encode(0x2ad4920700?, 0x2ad3a85a01?, 0x3f902f2678?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:332 +0x44
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structFieldEncoder).Encode(0x3f90233980, 0x2ad4814c31?, 0x3f902f2660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:110 +0x70
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structEncoder).Encode(0x3f902339e0, 0x2ad48c6ac0?, 0x3f902f2660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:158 +0x72c
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*sliceEncoder).Encode(0x3f90116dc8, 0x3f900c74f8, 0x3f902f2660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_slice.go:38 +0x320
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structFieldEncoder).Encode(0x3f90862570, 0x2ad481ab06?, 0x3f902f2660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:110 +0x70
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*structEncoder).Encode(0x3f90862660, 0x8?, 0x3f902f2660)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_struct_encoder.go:158 +0x72c
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*OptionalEncoder).Encode(0x2ad48a93c0?, 0x3f9011ab70?, 0x3f905fe800?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect_optional.go:70 +0xe8
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*onePtrEncoder).Encode(0x3f9051b000, 0x3f900c74a0, 0x3f9049bf20?)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:219 +0xa0
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*Stream).WriteVal(0x3f902f2660, {0x2ad49a5e20, 0x3f900c74a0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/reflect.go:98 +0x194
k8s.io/kubernetes/vendor/github.com/json-iterator/go.(*frozenConfig).Marshal(0x3f900fe8c0, {0x2ad49a5e20, 0x3f900c74a0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/json-iterator/go/config.go:299 +0xb0
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json.(*Serializer).doEncode(0x2?, {0x2ad4af1a90?, 0x3f900c74a0?}, {0x2ad4ae8aa0, 0x3f90430ff0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json/json.go:306 +0x80
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json.(*Serializer).Encode(0x3f9032c0f0, {0x2ad4af1a90, 0x3f900c74a0}, {0x2ad4ae8aa0, 0x3f90430ff0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json/json.go:301 +0x108
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning.(*codec).doEncode(0x3f903a6320, {0x2ad4af1a40?, 0x3f902f25a0}, {0x2ad4ae8aa0, 0x3f90430ff0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning/versioning.go:244 +0x5a0
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning.(*codec).Encode(0x3f903a6320, {0x2ad4af1a40, 0x3f902f25a0}, {0x2ad4ae8aa0, 0x3f90430ff0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning/versioning.go:184 +0x108
k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime.Encode({0x3f94c87e38, 0x3f903a6320}, {0x2ad4af1a40, 0x3f902f25a0})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/runtime/codec.go:50 +0x80
k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd.Write(...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd/loader.go:473
k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd.WriteToFile({{0x0, 0x0}, {0x0, 0x0}, {0x0, 0x3f904309c0}, 0x3f904309f0, 0x3f90430a20, 0x3f90430a50, {0x3f90410f50, ...}, ...}, ...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd/loader.go:426 +0x138
k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd.ModifyConfig({0x2ad4b00fa0, 0x3f90088500}, {{0x0, 0x0}, {0x0, 0x0}, {0x0, 0x3f903f1ec0}, 0x3f903f1ef0, 0x3f903f1f20, ...}, ...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/client-go/tools/clientcmd/config.go:294 +0x9b0
k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config.createAuthInfoOptions.run({{0x2ad4b00fa0, 0x3f90088500}, {0x3fee106c8c, 0x5}, {0x1, {0x3fee106ca7, 0x1d}}, {0x1, {0x3fee106cd2, 0x21}}, ...})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config/create_authinfo.go:203 +0x19c
k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config.newCmdConfigSetAuthInfo.func1(0x3f90811340?, {0x2ad45799b5?, 0x5?, 0x5?})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/config/create_authinfo.go:161 +0xb4
k8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).execute(0x3f90811340, {0x3f90088640, 0x5, 0x5})
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:854 +0x4dc
k8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x3f90389080)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:958 +0x324
k8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).Execute(...)
	/home/abuild/rpmbuild/BUILD/kubernetes-1.20.2/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:895
main.main()
	_output/local/go/src/k8s.io/kubernetes/cmd/kubectl/kubectl.go:49 +0x1a8
+ kubectl config set-context default --cluster=openeuler-k8s --user=admin --kubeconfig=admin.kubeconfig
Context "default" modified.
+ kubectl config use-context default --kubeconfig=admin.kubeconfig
Switched to context "default".
+ cd /root/mugen/testcases/cli-test/kubernetes
+ apiserver_prepare
++ base64
++ head -c 32 /dev/urandom
+ echo 'kind: EncryptionConfig
apiVersion: v1
resources:
  - resources:
      - secrets
    providers:
      - aescbc:
          keys:
            - name: key1
              secret: 05wqjnfBSkSd96qYE9afjm17H+VuQrmdFz5zVKUxomk=
      - identity: {}'
+ cat
+ echo '[Unit]
Description=Kubernetes API Server
Documentation=https://kubernetes.io/docs/reference/generated/kube-apiserver/
After=network.target
After=etcd.service
[Service]
EnvironmentFile=-/etc/kubernetes/config
EnvironmentFile=-/etc/kubernetes/apiserver
ExecStart=/usr/bin/kube-apiserver 	    $KUBE_ADVERTIS_ADDRESS 	    $KUBE_ALLOW_PRIVILEGED 	    $KUBE_AUTHORIZATION_MODE 	    $KUBE_ENABLE_ADMISSION_PLUGINS  	    $KUBE_SECURE_PORT 	    $KUBE_ENABLE_BOOTSTRAP_TOKEN_AUTH 	    $KUBE_ETCD_CAFILE 	    $KUBE_ETCD_CERTFILE 	    $KUBE_ETCD_KEYFILE 	    $KUBE_ETCD_SERVERS 	    $KUBE_CLIENT_CA_FILE 	    $KUBE_KUBELET_CERT_AUTH 	    $KUBE_KUBELET_CLIENT_CERT 	    $KUBE_KUBELET_CLIENT_KEY 	    $KUBE_PROXY_CLIENT_CERT_FILE 	    $KUBE_PROXY_CLIENT_KEY_FILE 	    $KUBE_TLS_CERT_FILE 	    $KUBE_TLS_PRIVATE_KEY_FILE 	    $KUBE_SERVICE_CLUSTER_IP_RANGE 	    $KUBE_SERVICE_ACCOUNT_ISSUER 	    $KUBE_SERVICE_ACCOUNT_KEY_FILE 	    $KUBE_SERVICE_ACCOUNT_SIGN_KEY_FILE 	    $KUBE_SERVICE_NODE_PORT_RANGE 	    $KUBE_LOGTOSTDERR 	    $KUBE_LOG_LEVEL 	    $KUBE_API_PORT 	    $KUBELET_PORT 	    $KUBE_ALLOW_PRIV 	    $KUBE_SERVICE_ADDRESSES 	    $KUBE_ADMISSION_CONTROL 	    $KUB_ENCRYPTION_PROVIDER_CONF 	    $KUBE_REQUEST_HEADER_ALLOWED_NAME 	    $KUBE_REQUEST_HEADER_EXTRA_HEADER_PREF 	    $KUBE_REQUEST_HEADER_GROUP_HEADER 	    $KUBE_REQUEST_HEADER_USERNAME_HEADER 	    $KUBE_API_ARGS
Restart=on-failure
Type=notify
LimitNOFILE=65536
[Install]
WantedBy=multi-user.target'
+ sed -i 's\http://127.0.0.1:8080\https://127.0.0.1:6443\g' /etc/kubernetes/config
+ systemctl daemon-reload
+ systemctl start kube-apiserver
Job for kube-apiserver.service failed because the control process exited with error code.
See "systemctl status kube-apiserver.service" and "journalctl -xeu kube-apiserver.service" for details.
+ echo 'apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    rbac.authorization.kubernetes.io/autoupdate: "true"
  labels:
    kubernetes.io/bootstrapping: rbac-defaults
  name: system:kube-apiserver-to-kubelet
rules:
  - apiGroups:
      - ""
    resources:
      - nodes/proxy
      - nodes/stats
      - nodes/log
      - nodes/spec
      - nodes/metrics
    verbs:
      - "*"'
+ kubectl apply --kubeconfig /etc/kubernetes/pki/admin.kubeconfig -f /etc/kubernetes/pki/admin_cluster_role.yaml
Please enter Username: Wed Nov 22 02:48:40 2023 - ERROR - Timeout : Command 'bash -x oe_test_service_kube-scheduler.sh' timed out after 1799.9994216990003 seconds
