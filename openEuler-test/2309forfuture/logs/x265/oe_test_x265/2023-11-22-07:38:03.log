+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start to prepare the test environment!'
+ message='Start to prepare the test environment!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to prepare the test environment!'
Wed Nov 22 07:38:05 2023 - INFO  - Start to prepare the test environment!
+ DNF_INSTALL x265
+ pkgs=x265
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs x265 --node 1 --tempfile ''
+ tmpfile2=/tmp/tmpdeqmok0k
+ '[' -z '' ']'
+ tmpfile=/tmp/tmpdeqmok0k
+ LOG_INFO 'End to prepare the test environment!'
+ message='End to prepare the test environment!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to prepare the test environment!'
Wed Nov 22 07:38:31 2023 - INFO  - End to prepare the test environment!
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Wed Nov 22 07:38:32 2023 - INFO  - Start to run test.
+ x265 -h
+ grep Options
x265 [info]: HEVC encoder version 3.5+1-f0c1022b6
x265 [info]: build info [Linux][GCC 10.3.1][32 bit][noasm] 8bit
Executable Options:
Output Options:
Input Options:
+ CHECK_RESULT 0 0 0 'Help information printing failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Help information printing failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ x265 -V
+ grep -E '[0-9]'
x265 [info]: HEVC encoder version 3.5+1-f0c1022b6
x265 [info]: build info [Linux][GCC 10.3.1][32 bit][noasm] 8bit
x265 [info]: using cpu capabilities: none!
+ CHECK_RESULT 0 0 0 'Version information printing failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Version information printing failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ x265 --input test.y4m -o file0
y4m  [info]: 176x144 fps 30000/1001 i420p8 sar 128:117 frames 0 - 299 of 300
raw  [info]: output file: file0
x265 [info]: HEVC encoder version 3.5+1-f0c1022b6
x265 [info]: build info [Linux][GCC 10.3.1][32 bit][noasm] 8bit
x265 [info]: using cpu capabilities: none!
x265 [info]: Main profile, Level-2 (Main tier)
x265 [info]: Thread pool created using 4 threads
x265 [info]: Slices                              : 1
x265 [info]: frame threads / pool features       : 2 / wpp(3 rows)
x265 [warning]: Source height < 720p; disabling lookahead-slices
x265 [info]: Coding QT: max CU size, min CU size : 64 / 8
x265 [info]: Residual QT: max TU size, max depth : 32 / 1 inter / 1 intra
x265 [info]: ME / range / subpel / merge         : hex / 57 / 2 / 3
x265 [info]: Keyframe min / max / scenecut / bias  : 25 / 250 / 40 / 5.00 
x265 [info]: Lookahead / bframes / badapt        : 20 / 4 / 2
x265 [info]: b-pyramid / weightp / weightb       : 1 / 1 / 0
x265 [info]: References / ref-limit  cu / depth  : 3 / off / on
x265 [info]: AQ: mode / str / qg-size / cu-tree  : 2 / 1.0 / 32 / 1
x265 [info]: Rate Control / qCompress            : CRF-28.0 / 0.60
x265 [info]: tools: rd=3 psy-rd=2.00 early-skip rskip mode=1 signhide tmvp
x265 [info]: tools: b-intra strong-intra-smoothing deblock sao
[0.3%] 1/300 frames, 1.37 fps, 1131.46 kb/s, eta 0:03:38  [3.3%] 10/300 frames, 9.95 fps, 121.99 kb/s, eta 0:00:29  [6.3%] 19/300 frames, 15.09 fps, 72.51 kb/s, eta 0:00:18  [10.0%] 30/300 frames, 19.81 fps, 54.54 kb/s, eta 0:00:13  [14.0%] 42/300 frames, 23.36 fps, 45.92 kb/s, eta 0:00:11  [18.0%] 54/300 frames, 26.32 fps, 39.07 kb/s, eta 0:00:09  [22.0%] 66/300 frames, 28.58 fps, 35.24 kb/s, eta 0:00:08  [25.7%] 77/300 frames, 30.08 fps, 33.21 kb/s, eta 0:00:07  [27.3%] 82/300 frames, 29.17 fps, 33.99 kb/s, eta 0:00:07  [30.7%] 92/300 frames, 29.76 fps, 32.86 kb/s, eta 0:00:06  [34.7%] 104/300 frames, 31.02 fps, 30.63 kb/s, eta 0:00:06  [38.0%] 114/300 frames, 31.42 fps, 29.84 kb/s, eta 0:00:05  [44.0%] 132/300 frames, 34.03 fps, 27.31 kb/s, eta 0:00:04  [47.3%] 142/300 frames, 34.12 fps, 27.47 kb/s, eta 0:00:04  [51.0%] 153/300 frames, 34.64 fps, 26.67 kb/s, eta 0:00:04  [54.3%] 163/300 frames, 34.93 fps, 26.30 kb/s, eta 0:00:03  [59.0%] 177/300 frames, 35.87 fps, 25.13 kb/s, eta 0:00:03  [62.7%] 188/300 frames, 36.23 fps, 24.51 kb/s, eta 0:00:03  [67.7%] 203/300 frames, 37.31 fps, 23.42 kb/s, eta 0:00:02  [71.0%] 213/300 frames, 37.08 fps, 23.43 kb/s, eta 0:00:02  [73.7%] 221/300 frames, 36.82 fps, 23.87 kb/s, eta 0:00:02  [78.0%] 234/300 frames, 37.29 fps, 23.44 kb/s, eta 0:00:01  [80.7%] 242/300 frames, 36.91 fps, 23.12 kb/s, eta 0:00:01  [82.7%] 248/300 frames, 35.95 fps, 25.30 kb/s, eta 0:00:01  [87.7%] 263/300 frames, 36.69 fps, 24.85 kb/s, eta 0:00:01  [92.3%] 277/300 frames, 37.17 fps, 24.45 kb/s, eta 0:00:00  [96.0%] 288/300 frames, 37.37 fps, 24.28 kb/s, eta 0:00:00                                                                                  x265 [info]: frame I:      2, Avg QP:24.58  kb/s: 612.11  
x265 [info]: frame P:     83, Avg QP:29.70  kb/s: 48.80   
x265 [info]: frame B:    215, Avg QP:35.57  kb/s: 5.57    
x265 [info]: Weighted P-Frames: Y:0.0% UV:0.0%
x265 [info]: consecutive B-frames: 9.4% 14.1% 4.7% 57.6% 14.1% 

encoded 300 frames in 7.74s (38.75 fps), 21.57 kb/s, Avg QP:33.87
+ test -f file0
+ CHECK_RESULT 0 0 0 'Check file0 failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check file0 failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ x265 --input test.y4m -o file0 --log-level warning
+ grep warning
x265 [warning]: Source height < 720p; disabling lookahead-slices
+ CHECK_RESULT 0 0 0 'Check warning failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check warning failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ x265 --input test.y4m -o file0 --fps 66
+ grep 'fps 66000'
y4m  [info]: 176x144 fps 66000/1000 i420p8 sar 128:117 frames 0 - 299 of 300
+ CHECK_RESULT 0 0 0 'Check fps 66000 failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check fps 66000 failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ x265 --input test.y4m -o file0 --frames 123
+ grep 'frames 0 - 122'
y4m  [info]: 176x144 fps 30000/1001 i420p8 sar 128:117 frames 0 - 122 of 300
+ CHECK_RESULT 0 0 0 'Check frames 122 failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check frames 122 failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ x265 --input test.y4m -o file0 --seek 5
+ grep 'frames 5'
y4m  [info]: 176x144 fps 30000/1001 i420p8 sar 128:117 frames 5 - 299 of 300
+ CHECK_RESULT 0 0 0 'Check frames 5 failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check frames 5 failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ x265 --input test.y4m -o file1 -D 10
x265 [warning]: falling back to default bit-depth
y4m  [info]: 176x144 fps 30000/1001 i420p8 sar 128:117 frames 0 - 299 of 300
raw  [info]: output file: file1
x265 [info]: HEVC encoder version 3.5+1-f0c1022b6
x265 [info]: build info [Linux][GCC 10.3.1][32 bit][noasm] 8bit
x265 [info]: using cpu capabilities: none!
x265 [info]: Main profile, Level-2 (Main tier)
x265 [info]: Thread pool created using 4 threads
x265 [info]: Slices                              : 1
x265 [info]: frame threads / pool features       : 2 / wpp(3 rows)
x265 [warning]: Source height < 720p; disabling lookahead-slices
x265 [info]: Coding QT: max CU size, min CU size : 64 / 8
x265 [info]: Residual QT: max TU size, max depth : 32 / 1 inter / 1 intra
x265 [info]: ME / range / subpel / merge         : hex / 57 / 2 / 3
x265 [info]: Keyframe min / max / scenecut / bias  : 25 / 250 / 40 / 5.00 
x265 [info]: Lookahead / bframes / badapt        : 20 / 4 / 2
x265 [info]: b-pyramid / weightp / weightb       : 1 / 1 / 0
x265 [info]: References / ref-limit  cu / depth  : 3 / off / on
x265 [info]: AQ: mode / str / qg-size / cu-tree  : 2 / 1.0 / 32 / 1
x265 [info]: Rate Control / qCompress            : CRF-28.0 / 0.60
x265 [info]: tools: rd=3 psy-rd=2.00 early-skip rskip mode=1 signhide tmvp
x265 [info]: tools: b-intra strong-intra-smoothing deblock sao
[0.3%] 1/300 frames, 1.60 fps, 1131.46 kb/s, eta 0:03:06  [3.7%] 11/300 frames, 12.53 fps, 111.38 kb/s, eta 0:00:23  [8.0%] 24/300 frames, 21.27 fps, 60.90 kb/s, eta 0:00:12  [12.0%] 36/300 frames, 26.03 fps, 48.25 kb/s, eta 0:00:10  [16.7%] 50/300 frames, 30.26 fps, 41.10 kb/s, eta 0:00:08  [21.7%] 65/300 frames, 33.78 fps, 35.66 kb/s, eta 0:00:06  [26.0%] 78/300 frames, 35.64 fps, 33.44 kb/s, eta 0:00:06  [29.0%] 87/300 frames, 35.64 fps, 33.55 kb/s, eta 0:00:05  [34.0%] 102/300 frames, 37.78 fps, 31.11 kb/s, eta 0:00:05  [39.3%] 118/300 frames, 39.99 fps, 29.04 kb/s, eta 0:00:04  [45.3%] 136/300 frames, 42.40 fps, 27.04 kb/s, eta 0:00:03  [49.3%] 148/300 frames, 42.57 fps, 26.96 kb/s, eta 0:00:03  [54.0%] 162/300 frames, 43.36 fps, 26.42 kb/s, eta 0:00:03  [60.0%] 180/300 frames, 45.13 fps, 24.99 kb/s, eta 0:00:02  [65.7%] 197/300 frames, 46.42 fps, 23.81 kb/s, eta 0:00:02  [70.3%] 211/300 frames, 46.85 fps, 23.28 kb/s, eta 0:00:01  [73.7%] 221/300 frames, 46.22 fps, 23.87 kb/s, eta 0:00:01  [78.7%] 236/300 frames, 46.88 fps, 23.31 kb/s, eta 0:00:01  [80.7%] 242/300 frames, 45.73 fps, 23.12 kb/s, eta 0:00:01  [82.7%] 248/300 frames, 43.76 fps, 25.30 kb/s, eta 0:00:01  [87.7%] 263/300 frames, 44.28 fps, 24.85 kb/s, eta 0:00:00  [92.3%] 277/300 frames, 44.53 fps, 24.45 kb/s, eta 0:00:00  [96.0%] 288/300 frames, 44.15 fps, 24.28 kb/s, eta 0:00:00                                                                                  x265 [info]: frame I:      2, Avg QP:24.58  kb/s: 612.11  
x265 [info]: frame P:     83, Avg QP:29.70  kb/s: 48.80   
x265 [info]: frame B:    215, Avg QP:35.57  kb/s: 5.57    
x265 [info]: Weighted P-Frames: Y:0.0% UV:0.0%
x265 [info]: consecutive B-frames: 9.4% 14.1% 4.7% 57.6% 14.1% 

encoded 300 frames in 6.62s (45.29 fps), 21.57 kb/s, Avg QP:33.87
+ test -f file1
+ CHECK_RESULT 0 0 0 'Check file1 failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check file1 failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ x265 --input test.y4m -o file2 --no-progress
y4m  [info]: 176x144 fps 30000/1001 i420p8 sar 128:117 frames 0 - 299 of 300
raw  [info]: output file: file2
x265 [info]: HEVC encoder version 3.5+1-f0c1022b6
x265 [info]: build info [Linux][GCC 10.3.1][32 bit][noasm] 8bit
x265 [info]: using cpu capabilities: none!
x265 [info]: Main profile, Level-2 (Main tier)
x265 [info]: Thread pool created using 4 threads
x265 [info]: Slices                              : 1
x265 [info]: frame threads / pool features       : 2 / wpp(3 rows)
x265 [warning]: Source height < 720p; disabling lookahead-slices
x265 [info]: Coding QT: max CU size, min CU size : 64 / 8
x265 [info]: Residual QT: max TU size, max depth : 32 / 1 inter / 1 intra
x265 [info]: ME / range / subpel / merge         : hex / 57 / 2 / 3
x265 [info]: Keyframe min / max / scenecut / bias  : 25 / 250 / 40 / 5.00 
x265 [info]: Lookahead / bframes / badapt        : 20 / 4 / 2
x265 [info]: b-pyramid / weightp / weightb       : 1 / 1 / 0
x265 [info]: References / ref-limit  cu / depth  : 3 / off / on
x265 [info]: AQ: mode / str / qg-size / cu-tree  : 2 / 1.0 / 32 / 1
x265 [info]: Rate Control / qCompress            : CRF-28.0 / 0.60
x265 [info]: tools: rd=3 psy-rd=2.00 early-skip rskip mode=1 signhide tmvp
x265 [info]: tools: b-intra strong-intra-smoothing deblock sao
x265 [info]: frame I:      2, Avg QP:24.58  kb/s: 612.11  
x265 [info]: frame P:     83, Avg QP:29.70  kb/s: 48.80   
x265 [info]: frame B:    215, Avg QP:35.57  kb/s: 5.57    
x265 [info]: Weighted P-Frames: Y:0.0% UV:0.0%
x265 [info]: consecutive B-frames: 9.4% 14.1% 4.7% 57.6% 14.1% 

encoded 300 frames in 7.76s (38.68 fps), 21.57 kb/s, Avg QP:33.87
+ test -f file2
+ CHECK_RESULT 0 0 0 'Check file2 failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check file2 failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ x265 --input test.y4m -o file3 --csv file3_csv
y4m  [info]: 176x144 fps 30000/1001 i420p8 sar 128:117 frames 0 - 299 of 300
raw  [info]: output file: file3
x265 [info]: HEVC encoder version 3.5+1-f0c1022b6
x265 [info]: build info [Linux][GCC 10.3.1][32 bit][noasm] 8bit
x265 [info]: using cpu capabilities: none!
x265 [info]: Main profile, Level-2 (Main tier)
x265 [info]: Thread pool created using 4 threads
x265 [info]: Slices                              : 1
x265 [info]: frame threads / pool features       : 2 / wpp(3 rows)
x265 [warning]: Source height < 720p; disabling lookahead-slices
x265 [info]: Coding QT: max CU size, min CU size : 64 / 8
x265 [info]: Residual QT: max TU size, max depth : 32 / 1 inter / 1 intra
x265 [info]: ME / range / subpel / merge         : hex / 57 / 2 / 3
x265 [info]: Keyframe min / max / scenecut / bias  : 25 / 250 / 40 / 5.00 
x265 [info]: Lookahead / bframes / badapt        : 20 / 4 / 2
x265 [info]: b-pyramid / weightp / weightb       : 1 / 1 / 0
x265 [info]: References / ref-limit  cu / depth  : 3 / off / on
x265 [info]: AQ: mode / str / qg-size / cu-tree  : 2 / 1.0 / 32 / 1
x265 [info]: Rate Control / qCompress            : CRF-28.0 / 0.60
x265 [info]: tools: rd=3 psy-rd=2.00 early-skip rskip mode=1 signhide tmvp
x265 [info]: tools: b-intra strong-intra-smoothing deblock sao
[0.3%] 1/300 frames, 1.55 fps, 1136.10 kb/s, eta 0:03:12  [4.3%] 13/300 frames, 14.23 fps, 98.48 kb/s, eta 0:00:20  [8.7%] 26/300 frames, 22.17 fps, 57.76 kb/s, eta 0:00:12  [12.3%] 37/300 frames, 25.98 fps, 47.23 kb/s, eta 0:00:10  [15.3%] 46/300 frames, 27.44 fps, 43.94 kb/s, eta 0:00:09  [21.0%] 63/300 frames, 32.49 fps, 35.85 kb/s, eta 0:00:07  [25.0%] 75/300 frames, 34.10 fps, 34.00 kb/s, eta 0:00:06  [28.3%] 85/300 frames, 34.59 fps, 33.59 kb/s, eta 0:00:06  [33.0%] 99/300 frames, 36.41 fps, 31.50 kb/s, eta 0:00:05  [37.3%] 112/300 frames, 37.69 fps, 30.00 kb/s, eta 0:00:04  [43.7%] 131/300 frames, 40.53 fps, 27.51 kb/s, eta 0:00:04  [47.3%] 142/300 frames, 40.60 fps, 27.50 kb/s, eta 0:00:03  [52.0%] 156/300 frames, 41.52 fps, 26.83 kb/s, eta 0:00:03  [57.7%] 173/300 frames, 43.15 fps, 25.51 kb/s, eta 0:00:02  [62.7%] 188/300 frames, 44.01 fps, 24.54 kb/s, eta 0:00:02  [69.3%] 208/300 frames, 45.71 fps, 23.26 kb/s, eta 0:00:02  [72.3%] 217/300 frames, 44.64 fps, 23.83 kb/s, eta 0:00:01  [75.7%] 227/300 frames, 44.31 fps, 23.73 kb/s, eta 0:00:01  [79.7%] 239/300 frames, 44.44 fps, 23.29 kb/s, eta 0:00:01  [82.0%] 246/300 frames, 43.68 fps, 23.00 kb/s, eta 0:00:01  [82.7%] 248/300 frames, 42.09 fps, 25.31 kb/s, eta 0:00:01  [87.7%] 263/300 frames, 42.74 fps, 24.87 kb/s, eta 0:00:00  [93.0%] 279/300 frames, 43.33 fps, 24.34 kb/s, eta 0:00:00  [97.7%] 293/300 frames, 43.75 fps, 24.07 kb/s, eta 0:00:00                                                                                  x265 [info]: frame I:      2, Avg QP:24.58  kb/s: 612.11  
x265 [info]: frame P:     83, Avg QP:29.70  kb/s: 48.80   
x265 [info]: frame B:    215, Avg QP:35.57  kb/s: 5.57    
x265 [info]: Weighted P-Frames: Y:0.0% UV:0.0%
x265 [info]: consecutive B-frames: 9.4% 14.1% 4.7% 57.6% 14.1% 

encoded 300 frames in 6.69s (44.85 fps), 21.57 kb/s, Avg QP:33.87
+ test -f file3_csv
+ CHECK_RESULT 0 0 0 'Check file3 failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check file3 failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'End to run test.'
+ message='End to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to run test.'
Wed Nov 22 07:39:27 2023 - INFO  - End to run test.
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Wed Nov 22 07:39:28 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'start environment cleanup.'
+ message='start environment cleanup.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'start environment cleanup.'
Wed Nov 22 07:39:28 2023 - INFO  - start environment cleanup.
+ rm -rf file0 file1 file2 file3 file3_csv
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmpdeqmok0k ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmpdeqmok0k
+ '[' 0 -ne 0 ']'
+ LOG_INFO 'Finish environment cleanup!'
+ message='Finish environment cleanup!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish environment cleanup!'
Wed Nov 22 07:39:36 2023 - INFO  - Finish environment cleanup!
